@model List<OrderSummaryVM>
@{
    ViewData["Title"] = "My Orders";
}
@* 
<div class="d-flex justify-content-between align-items-center mb-3">
    <div class="d-flex align-items-center ms-auto">
        <div class="input-group rounded" style="width:200px;">
            <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon" />
            <span class="input-group-text border-0" id="search-addon">
                <i class="fas fa-search"></i>
            </span>
        </div>
    </div>
</div> *@
<div class="card shadow">
    <div class="card-header bg-primary text-white d-flex justify-content-between">
        <div>
            <h5><i class="bi bi-bag-check-fill me-2"></i> Your Orders</h5>
        </div>
         <div>
            <form asp-action="GetFilterdOrders" asp-controller="Orders" method="post" class="mb-3 d-flex align-items-center">
                <label for="statusFilter" class="me-2 mb-0">Filter by Status:</label>
                <select name="status" id="statusFilter" class="form-select w-auto me-2" onchange="this.form.submit()">
                    @if (!string.IsNullOrEmpty(ViewBag.Status))
                    {
                        <option value="0" selected="@("" == @ViewBag.Status)">All</option>
                        <option value="1" selected="@("Pending" == @ViewBag.Status)">Pending</option>
                        <option value="2" selected="@("Shipped" == @ViewBag.Status)">Shipped</option>
                        <option value="3" selected="@("Delivered" == @ViewBag.Status)">Delivered</option>
                        <option value="4" selected="@("Cancelled" == @ViewBag.Status)">Cancelled</option>
                    }
                    else
                    {
                        <option value="0">All</option>
                        <option value="1">Pending</option>
                        <option value="2">Shipped</option>
                        <option value="3">Delivered</option>
                        <option value="4">Cancelled</option>
                    }

                </select>
            </form>
        </div> 

    </div>

</div>
 @if (Model.Count > 0)
{
    @foreach (var item in Model)
    {
        <div class="card shadow-4 border-0 mb-4">
            <div class="card-body">
                <div class="row g-4">
                    <!-- Order Info -->
                    <div class="col-lg-8">
                        <div class="d-flex">
                            <div>
                                <p class="mb-2"><strong>Order Number:</strong> @item.OrderId</p>
                                <p class="mb-2"><strong>Order Date:</strong> @item.OrderDate</p>
                                <p class="mb-2">
                                    <strong>Delivery Status:</strong>
                                    <span class="badge rounded-pill status-@item.DeliveryStatusName?.ToLower() ?? " default"">
                                        @item.DeliveryStatusName
                                    </span>
                                </p>
                                <p class="mb-2"><strong>Payment Method:</strong>@item.PaymentMethodName</p>
                                <p class="mb-2"><strong>Shipping Address:</strong> @item.ShippingAddress</p>
                            </div>
                        </div>

                        <hr />
                        <h6 class="fw-bold mb-3">Items</h6>
                        @foreach(var book in item.Items)
                        {
                        <div class="card mb-3 border-0 shadow-0">
                            <div class="row g-0 align-items-center">
                                <div class="col-3 col-md-2">
                                    <img src="/images/@book.PhotoPath" alt="@book.BookTitle" class="img-fluid rounded" style="max-height: 100px; object-fit: cover;" />
                                </div>
                                <div class="col-9 col-md-10 ps-3">
                                    <h6 class="mb-1">@book.BookTitle</h6>
                                    <p class="mb-1 text-muted">Qty:@book.Quantity</p>
                                    <strong><i class="fas fa-indian-rupee-sign"></i>@book.Price</strong>
                                </div>
                            </div>
                        </div>
                        }
                    </div>

                    <!-- Summary -->
                    <div class="col-lg-4">
                        <div class="card border shadow-2">
                            <div class="card-body">
                                <h5 class="card-title">Summary</h5>
                                <hr />
                                <div class="d-flex justify-content-between mb-3">
                                    <span>Subtotal</span>
                                    <strong>
                                        <i class="fas fa-indian-rupee-sign"></i>@item.Subtotal
                                    </strong>
                                </div>
                                <div class="d-flex justify-content-between mb-3">
                                    <span>Shipping</span>
                                    <strong>Free</strong>
                                </div>
                                <hr />
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Total</span>
                                    <strong>
                                        <i class="fas fa-indian-rupee-sign"></i>@item.Total
                                    </strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
}
else
{
    <div class="alert alert-info">No Orders</div>
}